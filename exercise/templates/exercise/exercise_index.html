{% extends 'base.html' %}
<!-- venv\Scripts\activate 가상환경 활성화 -->
<!-- deactivate 비활성화 -->
{% block content %}
<!-- 기존 head 내용 -->
<link href='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/5.11.0/main.min.css' rel='stylesheet' />

<div class="container">
    <h2>운동 기록 목록</h2>
    <table class="table">
        <thead>
            <tr>
                <th>운동 날짜</th>
                <th>운동 유형</th>
                <th>운동명</th>
                <th>운동 지속 시간(분)</th>
                <th>칼로리 소모</th>
                <th>무게</th>
                <th>횟수</th>
                <th>세트 수</th>
            </tr>
        </thead>
        <tbody>
            {% for exercise in exercises %}
            <tr>
                <td>{{ exercise.exercise_date }}</td>
                <td>{{ exercise.exercise_type }}</td>
                <td>{{ exercise.exercise_name }}</td>
                <td>{{ exercise.exercise_amount }}</td>
                <td>{{ exercise.calories_burned }}</td>
                <td>{{ exercise.weight }}</td>
                <td>{{ exercise.reps }}</td>
                <td>{{ exercise.sets }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div id="calendar"></div>
    <div id="results"></div>
</div>
{% endblock content %}

{% block scripts %}
<script src='https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/5.11.0/main.min.js'></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            dateClick: function (info) {
                var date = info.dateStr; // 'YYYY-MM-DD' 형식
                fetch(`/exercises/${date.split('-')[0]}/${date.split('-')[1]}/${date.split('-')[2]}/`)
                    .then(response => response.json())
                    .then(data => {
                        updateResults(data);
                    });
            }
        });
        calendar.render();
    });

    function updateResults(data) {
        var resultsDiv = document.getElementById('results');
        // 예시: data를 사용하여 결과창에 테이블을 생성
        // 여기에 데이터를 기반으로 HTML 컨텐츠를 생성하는 코드를 작성합니다.
    }
</script>
{% endblock scripts %}